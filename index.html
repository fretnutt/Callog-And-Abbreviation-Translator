<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Call Logger & Abbreviation Translator</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background-color: #f4f4f4; color: #333; }
        .main-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .container { display: flex; gap: 20px; width: 100%; margin-bottom: 20px; }
        .box { flex: 1; background-color: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); display: flex; flex-direction: column; }
        textarea { width: 100%; flex-grow: 1; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 16px; resize: vertical; height: 150px; }
        h1, h2 { color: #0056b3; margin-top: 0; }
        .box h2 {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .action-btn {
            padding: 6px 12px;
            font-size: 14px;
            cursor: pointer;
            border: 1px solid #0056b3;
            background-color: #007bff;
            color: white;
            border-radius: 5px;
            margin-left: 10px;
            line-height: 1.2;
            text-align: center;
        }
        .action-btn:hover {
            background-color: #0056b3;
        }
        .btn-subtext {
            font-size: 10px;
            font-weight: normal;
            opacity: 0.8;
            display: block;
        }

        #abbreviationsContainer { margin-top: 20px; padding-top: 20px; border-top: 1px solid #ddd; }
        .abbreviations-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .section {
            background-color: #fff;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .section-title {
            font-weight: bold;
            color: #0056b3;
            font-size: 1.2em;
            margin: 0;
            cursor: pointer;
            position: relative;
            padding-right: 20px;
        }

        .section-title::after {
            content: '▶';
            position: absolute;
            right: 5px;
            font-size: 0.8em;
            transition: transform 0.2s;
        }

        .section-title.active::after {
            transform: rotate(90deg);
        }
        
        .section-content {
            display: none;
            padding-top: 15px;
        }

        .section-content.active {
            display: block;
        }
        
        .subsection-title, .template-title {
            font-weight: bold;
            color: #333;
            font-size: 1.1em;
            margin-top: 10px;
            margin-bottom: 5px;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
        }
        
        .template-title {
             display: inline;
             border-bottom: none;
             margin-right: 10px;
        }

        .term-list {
            list-style-type: none;
            padding-left: 0;
            margin: 10px 0 0 0;
            font-size: 14px;
            column-count: 3;
            column-gap: 20px;
        }
        
        .template-list, .term-list-single-col {
             list-style-type: none;
             padding-left: 0;
             margin: 0;
             column-count: 1;
        }
        
        .template-list li, .term-list-single-col li {
             margin-bottom: 15px;
        }

        .term-list li {
            margin-bottom: 4px;
            -webkit-column-break-inside: avoid;
            page-break-inside: avoid;
            break-inside: avoid;
        }
        
        .toggle-def-btn {
            margin-left: 5px;
            padding: 2px 6px;
            font-size: 12px;
            cursor: pointer;
        }
        .collapsible-def {
            display: none;
            white-space: pre-wrap;
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-left: 3px solid #007bff;
            padding: 10px;
            margin-top: 5px;
            border-radius: 4px;
            font-family: monospace;
        }
        .collapsible-def.visible {
            display: block;
        }
        
        mark {
            background-color: yellow;
            color: black;
        }

        @media (max-width: 900px) { .term-list { column-count: 2; } }
        @media (max-width: 600px) { .container { flex-direction: column; } .term-list { column-count: 1; } }
    </style>
</head>
<body>
    <div class="main-header">
        <h1>Call Logger & Abbreviation Translator</h1>
    </div>
    <div class="container">
        <div class="box">
            <h2>Enter Text Here:</h2>
            <textarea id="inputText" placeholder="Start typing... for example: oil consumption is the iss"></textarea>
        </div>
        <div class="box">
            <h2>Translated Text</h2>
            <textarea id="translatedText" readonly></textarea>
        </div>
        <div class="box">
            <h2>Scratch Pad</h2>
            <textarea id="scratchPad" placeholder="Your notes here..."></textarea>
        </div>
    </div>
    <div id="abbreviationsContainer">
        <div class="abbreviations-header">
            <h2>Available Abbreviations</h2>
            <button id="copyHighlightedBtn" class="action-btn">
                Copy To Scratch Pad
                <span class="btn-subtext">(what you highlight)</span>
            </button>
            <button id="toggleAllBtn" class="action-btn">Toggle All</button>
        </div>
        <div id="abbreviationsList"></div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const masterList = [
            {
                main_section: "Checklists & Verbiage",
                is_template_section: true,
                templates: [
                    { abbr: "bcl", title: "Buyback Checklist", text: "Mileage: \nCurrent Concerns: \nIs the vehicle currently at a GM dealership? (Yes/No) \nRepair Order Open Date: \nDiagnosis: \nIs the customer in a courtesy/rental vehicle? \nDealership & Customer Feedback: \nImportant vehicle information or feedback from the dealership: \nAssistance & Involvement: \nHas any goodwill or cost assistance been offered? (Yes/No) \nHas TAC been involved? (Yes/No) \nTAC case number and feedback: \nName of CEM at the dealer: \nSelling Information: \nDate vehicle was purchased: \nWas the customer in the military at time of purchase? (Yes/No) \nSelling dealer name and BAC: \nVehicle delivery type: \nWas the vehicle purchased new or used? \nTOTAL days vehicle has been down: \nSummary: \nBrief Repair Summary: \nAny other relevant facts for the business case:" },
                    { abbr: "icl", title: "Initial Customer Intake", text: "VEHICLE:\nVEHICLE SYMPTOMS:\nVIN:\nMILEAGE:\nVEHICLE LOCATION:\nAPPT/REPAIR STATUS:\nDLR/BAC:\nDIAGNOSIS:\nREPAIR ETA:\nPREVIOUS COMPLAINTS:\nBAC PROVIDE COURTESY TRANS?\nVEHICLE PURPOSE: Personal Use\nVEHICLE DELIVERY TYPE: Retail/Individual\nBTTC:\nCUSTOMER PROFILE:\nREGION:" },
                    { abbr: "bbd", title: "Buyback Denial Verbiage", text: "Your request was carefully reviewed, and General Motors is declining your request for a repurchase.\nIf you would like more information, the BBB AUTO LINE website provides each state’s specific lemon law guidelines and the requirements to meet eligibility. Their website is: www.bbbautoline.org. In addition, your Owner’s Manual and Warranty booklet provides an overview on how to utilize the BBB AUTO LINE dispute process." },
                    { abbr: "pwc", title: "Paint Warranty", text: "Chevrolet's paint warranty covers defects related to materials or workmanship.\nKey Coverage Details:\n- Surface Corrosion: Body sheet metal panels are covered against rust for 3 years or 36,000 miles, whichever comes first..." },
                    { abbr: "twc", title: "Tire Warranty", text: "Tires supplied with your Chevrolet vehicle are covered under the Bumper-to-Bumper coverage against defects in material or workmanship..." },
                    { abbr: "req", title: "Required Elements of a Business Case Checklist", text: "This checklist outlines the minimum required elements for a business case justification. Cases may be returned if the business case is insufficient..." },
                    { abbr: "ggo", title: "General Guidelines for All Compensation Offers", text: "This provides a checklist for decision-making on all compensation offers..." },
                    { abbr: "crc", title: "Cost Assistance Request Checklist", text: "This checklist guides the process when a customer requests financial help with a repair..." },
                    { abbr: "old", title: "Owner Loyalty Certificate (OLC) Decision Flow", text: "This is a step-by-step checklist to determine if an OLC should be offered and for how much..." },
                    { abbr: "ccr", title: "Component Coverage Letter (CCL) Restrictions Checklist", text: "A Component Coverage Letter may not be offered in these situations..." },
                    { abbr: "cpr", title: "Car Payment Reimbursement Checklist", text: "This tool can be considered under the following conditions..." }
                ]
            },
            {
                main_section: "Customer Statements",
                sub_sections: [ { title: "Requests & Desires", terms: { "cbb": "The Customer Requested a Repurchase...", "cec": "The customer is expecting compensation", "crd": "Customer wants to know if we received their sent documentation.", "cmc": "The Customer Expects More Compensation", "cre": "Customer wants to know more about a Recall...", "cri": "Customer called requesting information", "crr": "The Customer Would Like Warranty Rental Reimbursement", "crs": "Customer Called about their repair status.", "csa": "Customer Called About Their Existing Service Request...", "ctw": "The Customer Would LIke Tow Reimbursement", "cwr": "The Customer wants a replacement vehicle...", "cwu": "The Customer wants an update on..." } }, { title: "State & Feelings", terms: { "ccc": "The customer stated they were concerned.", "cex": "The customer expects or is expecting", "cf": "The customer feels.", "cfc": "The customer feels that their issue should be covered", "coe": "Customer Upset that their Owning Advisor is not meeting the customer's communications expectations", "csd": "Customer upset that their Dealer Is not diagnosing fast enough.", "cup": "Customer is Upset", "cw": "The Customer wants..." } }, { title: "Allegations & Complaints", terms: { "cac": "Accusation/Accuses", "cdm": "Customer alleges GM Dealer caused further damages...", "cal": "The customer alleges", "cbe": "The Customer Was Beligerent...", "cdh": "The customer alleges that their GM Dealer are not being forthright about" } }, { title: "Reports & General", terms: { "cs": "The Customer Stated", "ccb": "The Customer Called Because", "cpt": "Customer states he previously requeststed Manager follow...", "crt": "Customer said Roadside towed to a GM Dealer.", "coa": "The customer advised that his Owning Advisor is not following up...", "cod": "Customer mentioned issues requiring transfer to", "crb": "The Customer States They Were Referred By", "crp": "Repeat Repairs/Multiple Appointments", "dad": "Customer states vehicle is/has been down at GM Dealer for ", "dal": "The customer has a GM Dealer Allegation...", "cis": "The Customer's Issue is", "cju": "The customer attempted to justify why they feel their request should be approved.", "cok": "Customer accepted current final resolution/update/offer...", "cdc": "The customer intentionally disconnected our call.", "cnf": "Customer requested nothing further", "crf": "Customer Refused Resolution", "csc": "Customer called about Special Coverage they feel is applicable." } } ]
            },
            {
                main_section: "Vehicles & Parts",
                sub_sections: [ 
                    { title: "General Parts & Issues", terms: { "ab": "Air-Bag", "afs": "Air Filter", "clus": "Instrument Cluster Malfunctions", "flt": "Fuel Filter", "fp": "Fuel Pump Failures", "gbi": "Google Built-In", "hea": "Heating/issue", "lif": "Lifter Issues", "oc": "Oil Consumption Issues", "pc": "Part/s of concern", "prof": "Display Profile", "pta": "Part is tank.", "pwst": "Power Steering Loss", "rad": "Vehicle Radio", "rka": "Rocker Arms", "rsd": "Rear Screen Display", "sta": "Stalling & Misfiring", "swc": "Ignition Switch", "veh": "vehicle" } },
                    { title: "Engine Problems (Complaints)", terms: { "cel": "Check Engine Light: A frequent issue that can signal anything from a loose gas cap to a sensor malfunction.", "oht": "Overheating: Can be caused by low coolant, leaks, or a faulty thermostat.", "msf": "Misfires or Sputtering: Often a result of bad spark plugs or damaged wires.", "knp": "Knocking/Pinging Sounds: This may be due to using the wrong fuel, low oil, or loose engine parts." } },
                    { title: "Braking Issues (Complaints)", terms: { "nbk": "Noisy Brakes: Squealing or grinding noises often indicate that the brake pads are worn.", "sbk": "Spongy or Soft Pedal: This could mean there is air in the brake lines or a leak in the hydraulic system.", "vbp": "Vibrations/Pulsations: Often caused by warped rotors." } },
                    { title: "Transmission Problems (Complaints)", terms: { "tsl": "Slipping: The engine revs without a corresponding increase in speed or the car loses power when shifting.", "hsh": "Harsh or Delayed Shifting: Can be a result of low transmission fluid.", "tfl": "Transmission Fluid Leaks: May be a sign of worn seals or gaskets." } },
                    { title: "Electrical System (Complaints)", terms: { "dbt": "Dead Battery: Frequently caused by leaving lights on or an old battery.", "fsr": "Faulty Starter Motor: Prevents the engine from starting.", "dml": "Dimming Lights or Whining Noise: This can indicate a failing alternator.", "msn": "Malfunctioning Sensors: Can cause inaccurate readings and performance problems.", "pwp": "Power Window Problems: A common issue where windows do not operate correctly." } },
                    { title: "Other Common Vehicle Issues", terms: { "tir": "Tire Concerns: This includes flat tires and uneven wear, which could signal alignment or inflation problems.", "stp": "Steering Problems: Issues such as difficulty turning or the car pulling to one side.", "cws": "Cracked Windshield: This can be a safety hazard.", "ltf": "Headlights/Taillights: Failure of these lights reduces visibility.", "wpf": "Windshield Wipers: Worn wipers can decrease visibility in bad weather." } },
                    { title: "Models", terms: { "aca": "Acadia", "ats": "ATS", "atv": "ATS-V", "ax": "Trax", "bev": "Bolt EV", "blz": "Blazer", "bze": "Blazer EV", "bui": "Buick", "c4": "CT4", "c5v": "CT5-V", "c6v": "CT6-V", "cad": "Cadillac", "can": "Canyon", "ceq": "Celestiq", "chv": "Chevrolet", "cmr": "Camaro", "col": "Colorado", "crv": "Corvette", "crz": "Cruze", "csc": "Cascada", "ct5": "CT5", "ct6": "CT6", "cts": "CTS", "ctv": "CTS-V", "egx": "Encore GX", "elr": "ELR", "enc": "Enclave", "enr": "Encore", "env": "Envision", "equ": "Equinox", "eqv": "Equinox EV", "esc": "Escalade", "esv": "Escalade ESV", "evs": "Envista", "exp": "Express", "g15": "Sierra 1500", "g2h": "Sierra 2500HD", "g3h": "Sierra 3500HD", "gev": "Sierra EV", "hep": "Hummer EV Pickup", "hes": "Hummer EV SUV", "imp": "Impala", "iql": "Escalade IQL", "lcx": "LaCrosse", "lyq": "Lyriq", "mal": "Malibu", "opt": "Optiq", "rgl": "Regal", "s15": "Silverado 1500", "s2h": "Silverado 2500HD", "s3h": "Silverado 3500HD", "sav": "Savana", "sev": "Silverado EV", "sie": "Sierra", "sil": "Silverado", "snc": "Sonic", "spk": "Spark", "srx": "SRX", "ss": "SS", "sub": "Suburban", "tah": "Tahoe", "ter": "Terrain", "tra": "Traverse", "trl": "Trailblazer", "vis": "Vistiq", "vlt": "Volt", "vrn": "Verano", "x4": "XT4", "x5": "XT5", "x6": "XT6", "xts": "XTS", "yxl": "Yukon XL", "yuk": "Yukon" } }, 
                    { title: "Major Components & Systems", terms: { "ac": "Air Conditioning", "dic": "Driver Information Cluster (speedometer,etc)", "elec": "Electrical System Failures", "eng": "Engine", "hvac": "Heating & Cooling", "ign": "Ignition System", "ivi": "In-Vehicle Infotainment Display", "rbc": "Rear Back-Up Camera/Display", "sft": "Software", "tran": "Transmission" } },  
                    { title: "Engine & Drivetrain Parts", terms: { "alt": "Alternator", "ams": "Camshaft Position Sensor", "bo": "Burning Oil.", "brg": "Engine Bearings (Main/Rod)", "blk": "Cylinder Block", "cam": "Camshaft", "cat": "Catalytic Converter", "coi": "Ignition Coils", "con": "Connecting Rods", "cps": "Crankshaft Position Sensor", "crk": "Crankshaft", "cyl": "Cylinder Head(s)", "def": "Diesel Def", "die": "Diesel", "dur": "Duramax", "enf": "Engine Failure Repairs", "fpm": "Fuel Pump", "fpr": "Fuel Pressure Regulator", "hdg": "Head Gaskets", "acv": "Idle Air Control (Valve)", "icm": "Ignition Control Module", "inj": "Fuel Injectors", "lft": "Lifters", "maf": "Mass Airflow Sensor", "o2s": "Oxygen (O2) Sensors", "oil": "Engine Oil and Oil Filter", "pis": "Pistons and Piston Rings", "prd": "Pushrods", "pv": "Purge Valve", "spk": "Spark Plugs", "thb": "Throttle Body", "tmb": "Timing Chain/Belt and Components", "tmc": "Timing Chain/Components", "vb": "Valve Body", "vlv": "Valve Lifter Oil Manifold with Solenoid", "wpm": "Water Pump and Cooling System Components" } }
                ]
            },
            {
                main_section: "Agent Statements & Communications",
                sub_sections: [ 
                    { title: "Advising", terms: { 
                        "iac": "I advised the Customer", 
                        "idg": "I advised to Customer that <mark>Dealer determines from diagnosis...</mark>", 
                        "idi": "I advised the customer that <mark>since GM Dealer's are independent businesses...</mark>", 
                        "idh": "I advised the customer <mark>I will contact their dealer...</mark>", 
                        "idb": "I advised to the customer that their <mark>repurchase request was carefully reviewed and denied...</mark>", 
                        "idr": "I advised the customer that <mark>when the GM Dealer referred him to Customer Care...</mark>", 
                        "iib": "I advised the customer that <mark>in addition to the standard eligibility criteria...</mark>", 
                        "icd": "The Customer Was Advised of <mark>Documents Needed...</mark>", 
                        "ice": "I let the customer know their <mark>request is Awaiting executive approval</mark>", 
                        "idc": "Customer was advised their <mark>complaint will be submitted to all of General Motors and their Dealer...</mark>", 
                        "isc": "I advised customer about <mark>Special Coverages...</mark>", 
                        "iwr": "I advised to Customer that the <mark>New Vehicle Manufacturer Warranty does not extend...</mark>", 
                        "ica": "I have <mark>sent your allegation/s to the General Motors Dealer you complained about...</mark>", 
                        "irr": "Advised customer their <mark>request is being reviewed...</mark>", 
                        "iei": "I <mark>educated customer of GM internal, non-customer facing verbiage.</mark>" 
                    } }, 
                    { title: "Actions Logged", terms: { 
                        "pde": "I confirmed <mark>customer request related to a part eligible to be assigned to Part Delay Team...</mark>", 
                        "itr": "I attempted <mark>troubleshooting recommendations from the vehicle Owner's Manual...</mark>", 
                        "imc": "I <mark>made contact</mark> with the customer", "ied": "I <mark>educated</mark> the customer", 
                        "idv": "I left a <mark>detailed voicemail...</mark>", 
                        "ivm": "Left <mark>Voicemail</mark>", 
                        "ppi": "I confirmed the <mark>customer Personal Identification Information & Contact info.</mark>", 
                        "ipc": "I provided the customer with their <mark>case number.</mark>", 
                        "ion": "I provided the customer with their <mark>Owning Advisor's First name only.</mark>", 
                        "ipd": "I provided the customer with the <mark>denial</mark>", 
                        "ipi": "The <mark>Customer Requested Information & I Provided:</mark>", 
                        "ix": "I <mark>referred customer or customer requested being transferred to:</mark>", 
                        "ixe": "Customer was <mark>referred and transferred to EV Conceirge</mark>", 
                        "ixo": "The customer's <mark>advisor was available to transfer the call as requested...</mark>", 
                        "ixr": "I <mark>offered transfer to Roadside. Customer accepted.</mark>", 
                        "aot": "The <mark>owning advisor was available in OMNI...</mark>", 
                        "cdo": "Customer was <mark>advised to send the appropriate documentation discussed...</mark>", 
                        "eca": "Customer was <mark>educated on GM Cost Assistance policy...</mark>", 
                        "icr": "Customer was <mark>made aware of the recall in questions...</mark>", 
                        "ide": "I <mark>de-escalated</mark> the customer who was angry" 
                    } } 
                ]
            },
            {
                main_section: "Concepts & Coverages",
                sub_sections: [ { title: "Formal", terms: { "btb": "Bumper To Bumper Coverage", "ca": "GM Cost Assistance", "cfl": "Catastrophic Failure", "ccl": "Extra Component Coverage Goodwill", "cct": "Onstar Connections", "con": "Concern/s/ed", "cpo": "Certified Pre-Owned Vehicle", "exw": "Extended Vehicle Warranty from an Independent Provider.", "fle": "Envolve/Fleet", "oop": "Out of Pocket Customer Pay", "pwt": "Powertrain Coverage", "rec": "recall", "rei": "Reimbursement", "sc": "Special Coverage", "vpr": "Vehicle Payment Reimbursement", "ti": "Trip Interruption" } }, { title: "General", terms: { "com": "Compensation", "iss": "issue", "lob": "Line of Business.", "ons": "Onstar" } } ]
            },
            {
                main_section: "Processes",
                sub_sections: [ { title: "Service & Repair", terms: { "app": "Appointment", "diag": "Diagnosis.", "dr": "Delayed Repair", "pd": "Part Delay", "rre": "Repeat Repairs/Appointments Failed Remedies" } }, { title: "Case Management", terms: { "ixf": "Inbound call from other department Transfer...", "cae": "The customer confirmed they reside in California...", "cxd": "Customer was transferred to the applicable department.", "int": "Internal: I was not able to find anything I could assist...", "les": "The customer requested escalation to supervisor...", "reg": "Advised customer of regional escalation...", "tle": "Manager Escalation Follow-Up Phone Call...", "u1": "Unable to Contact 1st Attempt-LVM?...", "u2": "Unable to Contact 2nd Attempt-LVM?...", "u3": "Unable to Contact 3rd and Final Attempt-LVM?" } }, { title: "Specific Programs", terms: { "bb": "Repurchase/Buyback", "ctp": "Courtesy Transportation Program", "mrp": "General Motors My Rewards Points Program", "prc": "Post-Repair Discussion About Potential Compensation...", "reu": "Reunification Program", "rsa": "General Motors Roadside Warranty Assistance", "tre": "Tread Escalation" } } ]
            },
            {
                main_section: "Actions",
                sub_sections: [ { title: "Agent Actions", terms: { "ass": "Assisting", "fu": "Follow-Up", "goo": "Googled and found forums alleging known issues", "ic": "Confirmed", "mtc": "Move To Close Case", "pr": "Customer will call back post-repair", "rfi": "Request For Information", "sch": "Schedule" } }, { title: "Dealer/System Actions", terms: { "acc": "Accelerate", "aco": "Accomodate/tion", "cnd": "Could Not Duplicate", "dd": "The Dealer Diagnosed", "drf": "The Dealer Referred The Customer", "dln": "Dealer did not provide a loaner", "dly": "Dealer did provide a loaner", "fai": "Failed", "pro": "Dealer Programmed", "rep": "Repair/s", "rpl": "Replace/ment", "rpr": "Dealer Reprogrammed", "ser": "service", "ts": "Troubleshoot/ing" } } ]
            },
            {
                main_section: "Documents & Identifiers",
                sub_sections: [ { title: "Case & Vehicle", terms: { "add": "Customer Mailing Address.", "cn": "Case Number:", "cr": "The Customer Resides In", "ct": "Call Type (IBCC/OBCC):", "dn": "Dealer Name:", "mil": "Current Vehicle Mileage:", "o": "Outcome:", "r": "Reason:", "sr": "Service Request", "sym": "Symptoms:", "vin": "Vehicle V.I.N." } }, { title: "Documents & Records", terms: { "bul": "Bulletin", "clg": "Case Information", "cd": "Call Details", "del": "Delivery Type", "doc": "Documentation/s", "em": "Email", "esi": "Insurance and liability claims (fire and/or medical)", "eta": "Estimated Time of Arrival/Repair", "fi": "Final Invoice", "gl": "GM Guidelines.", "om": "Owner's Manual", "pac": "PAC-Product Allegation (property damage,defect cause collision)", "pal": "Product Allegation", "pdf": "PDF Document", "tsb": "Technical Service Bulletin" } } ]
            },
            {
                main_section: "Places & Departments",
                sub_sections: [ { title: "GM & Dealer", terms: { "bac": "GM Dealer/BAC", "bu": "Business Unit.", "cac": "GM Customer Assistance Center", "ccd": "Cadillac Customer Care Team", "div": "GM Divisional Office", "dlr": "GM Dealer", "dpt": "Department", "gmf": "GM FInancial", "pdt": "Part Delay Team", "tac": "Technical Assistance Center (Dealer invite only)" } }, { title: "External & Other", terms: { "ind": "Independent Dealer/Supplier/Auto Mechanic", "bbb": "Better Business Bureau verbiage" } } ]
            },
            {
                main_section: "People & Roles",
                sub_sections: [ { title: "Dealer Roles", terms: { "ds": "Dealer Sales Manager", "dms": "Dealer Service Manager.", "dsa": "GM Sales at Dealer", "sd": "GM Dealer Service Director.", "tech": "Service Technician" } }, { title: "Corporate & Field", terms: { "cem": "Customer Experience Manager", "fse": "Field Service Engineer (Dealer Invite Only)", "rfl": "Regional Field Liason" } }, { title: "General", terms: { "cx": "Customer", "mfr": "manufacturer", "oa": "Owning Advisor" } } ]
            },
            {
                main_section: "Sales & Service Complaints",
                sub_sections: [ { title: "Auto Repair Issues", terms: { "irp": "Improper Repairs...", "hpr": "High Prices...", "udl": "Unexpected Delays...", "rvs": "Return Visits...", "uns": "Unnecessary Services...", "pcs": "Poor Customer Service...", "ees": "Exceeding the Estimate...", "ltr": "Lack of Transparency..." } }, { title: "Deceptive Practices", terms: { "bsp": "Bait-and-Switch Pricing...", "uef": "Unexpected Fees...", "dca": "Deceptive Advertising..." } }, { title: "New Vehicle Quality Issues", terms: { "dql": "Declining Quality...", "isi": "Infotainment and Software Issues..." } }, { title: "Used Car Sales Complaints", terms: { "odf": "Odometer Fraud...", "lmv": "Lemon Vehicles...", "ais": "\"As Is\" Sales..." } } ] }
        ];

        const inputText = document.getElementById('inputText');
        const translatedText = document.getElementById('translatedText');
        const scratchPad = document.getElementById('scratchPad');
        const abbreviationsListDiv = document.getElementById('abbreviationsList');
        
        const complaintAbbreviations = new Set(['cel', 'oht', 'msf', 'knp', 'nbk', 'sbk', 'vbp', 'tsl', 'hsh', 'tfl', 'dbt', 'fsr', 'dml', 'msn', 'pwp', 'tir', 'stp', 'cws', 'ltf', 'wpf']);
        
        const keywordsToHighlight = [...new Set([
            'Repurchase', 'compensation', 'More', 'documentation', 'Recall', 'information', 'Warranty', 'status', 'Existing', 'Tow', 'replacement', 'update', 'concerned', 'expects', 'feels', 'covered', 'expectations', 'diagnosing', 'Upset', 'wants', 'Accusation', 'alleges', 'Beligerent', 'forthright', 'damages', 'Because', 'disconnected', 'Issue', 'justify', 'nothing', 'follow-up', 'transfer', 'accepted', 'Manager', 'Referred', 'Refused', 'Repeat', 'Roadside', 'Stated', 'Allegation', 'approval', 'denied', 'submitted', 'determines', 'contact', 'independent', 'referred', 'educated', 'eligibility', 'reviewed', 'Coverages', 'extend', 'available', 'aware', 'de-escalated', 'voicemail', 'Advisor\'s', 'number', 'denial', 'Information', 'troubleshooting', 'Voicemail', 'transferred', 'Delay', 'Identification', 'Appointment', 'Diagnosis', 'Delayed', 'escalation', 'Buyback', 'Courtesy', 'Rewards', 'Reimbursement', 'Reunification', 'Tread', 'Assisting', 'Follow-Up', 'Googled', 'Confirmed', 'Close', 'post-repair', 'Schedule', 'Accelerate', 'Accomodate', 'Duplicate', 'Diagnosed', 'loaner', 'Failed', 'Programmed', 'Repair', 'Replace', 'Reprogrammed', 'service',
             'engine', 'oil', 'consumption', 'lifter', 'air', 'bag', 'filter', 'cluster', 'rocker', 'radio', 'rear', 'screen', 'stalling', 'ignition', 'leaks', 'power', 'window', 'faulty', 'noisy', 'squealing', 'grinding', 'spongy', 'vibrations', 'pulsations', 'harsh', 'slipping', 'dead', 'dimming', 'whining', 'malfunctioning', 'cracked', 'failure', 'steering', 'loss', 'tire', 'worn'
        ])];
        
        const highlightRegex = new RegExp('\\b(' + keywordsToHighlight.join('|') + ')\\b', 'gi');

        function highlightTextInString(text) {
            if (typeof text !== 'string' || !text) return '';
            return text.replace(highlightRegex, '<mark>$&</mark>');
        }

        const lookupAbbreviations = masterList.reduce((acc, mainSection) => {
            if (mainSection.is_template_section) {
                (mainSection.templates || []).forEach(template => { if (template.abbr) acc[template.abbr.toLowerCase()] = template.text; });
            } else {
                (mainSection.sub_sections || []).forEach(subSection => {
                    const terms = subSection.terms || {};
                    for (const term in terms) { acc[term.toLowerCase()] = terms[term]; }
                });
            }
            return acc;
        }, {});

        function performTranslation() {
            const currentText = inputText.value;
            const parts = currentText.split(/([ \n\t.,;!?()]+)/);
            const translatedParts = parts.map(part => {
                const lowerPart = part.toLowerCase();
                if (lookupAbbreviations.hasOwnProperty(lowerPart)) {
                    let definition = lookupAbbreviations[lowerPart];
                    if (complaintAbbreviations.has(lowerPart)) {
                        return definition.split(':')[0];
                    }
                    return definition;
                }
                return part;
            });
            translatedText.value = translatedParts.join('');
        }

        function populateAbbreviationsList() {
            abbreviationsListDiv.innerHTML = '';
            const sectionsToHighlight = ["Customer Statements", "Processes", "Actions", "Vehicles & Parts"];

            masterList.forEach(mainSection => {
                const sectionDiv = document.createElement('div');
                sectionDiv.className = 'section';
                
                const title = document.createElement('h2');
                title.className = 'section-title';
                title.textContent = mainSection.main_section;
                
                const contentDiv = document.createElement('div');
                contentDiv.className = 'section-content';

                const shouldHighlight = sectionsToHighlight.includes(mainSection.main_section);
                const isAgentSection = mainSection.main_section === "Agent Statements & Communications";

                if (mainSection.is_template_section) {
                    const templateList = document.createElement('ul');
                    templateList.className = 'template-list';
                    mainSection.templates.forEach(template => {
                        const listItem = document.createElement('li');
                        let titleHtml = template.abbr ? `<strong>${template.abbr}</strong>: <span class="template-title">${template.title}</span>` : `<h4 class="template-title">${template.title}</h4>`;
                        let definitionHtml = `<div class="collapsible-def">${template.text}</div>`;
                        listItem.innerHTML = `${titleHtml} <button class="toggle-def-btn">[Show]</button> ${definitionHtml}`;
                        templateList.appendChild(listItem);
                    });
                    contentDiv.appendChild(templateList);
                } else {
                    (mainSection.sub_sections || []).forEach(subSection => {
                        const subTitle = document.createElement('h3');
                        subTitle.className = 'subsection-title';
                        subTitle.textContent = subSection.title;
                        contentDiv.appendChild(subTitle);
                        
                        const list = document.createElement('ul');
                        list.className = 'term-list';
                        const sortedTerms = Object.keys(subSection.terms || {}).sort();
                        sortedTerms.forEach(term => {
                            const listItem = document.createElement('li');
                            const termText = subSection.terms[term];
                            if (isAgentSection) {
                                listItem.innerHTML = `<strong>${term}</strong>: ${termText}`;
                            } else {
                                listItem.innerHTML = `<strong>${term}</strong>: ${shouldHighlight ? highlightTextInString(termText) : termText}`;
                            }
                            list.appendChild(listItem);
                        });
                        contentDiv.appendChild(list);
                    });
                }

                title.addEventListener('click', () => {
                    title.classList.toggle('active');
                    contentDiv.classList.toggle('active');
                });
                
                sectionDiv.appendChild(title);
                sectionDiv.appendChild(contentDiv);
                abbreviationsListDiv.appendChild(sectionDiv);
            });
        }
        
        function setupToggleAllButton() {
            const toggleBtn = document.getElementById('toggleAllBtn');
             if (toggleBtn) {
                 toggleBtn.addEventListener('click', function() {
                    const allTitles = document.querySelectorAll('.section-title');
                    const allContents = document.querySelectorAll('.section-content');
                    const shouldOpen = allTitles.length > 0 && !allTitles[0].classList.contains('active');
                    allTitles.forEach(title => title.classList.toggle('active', shouldOpen));
                    allContents.forEach(content => content.classList.toggle('active', shouldOpen));
                });
            }
        }

        function setupCollapsibleDefinitions() {
            abbreviationsListDiv.addEventListener('click', function(event) {
                if (event.target.classList.contains('toggle-def-btn')) {
                    const btn = event.target;
                    const definitionDiv = btn.nextElementSibling;
                    const isVisible = definitionDiv.classList.toggle('visible');
                    btn.textContent = isVisible ? '[Hide]' : '[Show]';
                }
            });
        }
        
        function setupCopyHighlightedButton() {
            const copyBtn = document.getElementById('copyHighlightedBtn');
            if (copyBtn) {
                copyBtn.addEventListener('click', function() {
                    const selectedText = window.getSelection().toString().trim();
                    if (selectedText) {
                        if (scratchPad.value.length > 0) {
                            scratchPad.value += '\n\n' + selectedText;
                        } else {
                            scratchPad.value = selectedText;
                        }
                        scratchPad.scrollTop = scratchPad.scrollHeight;
                    }
                });
            }
        }

        inputText.addEventListener('input', performTranslation);
        
        populateAbbreviationsList();
        setupToggleAllButton();
        setupCollapsibleDefinitions();
        setupCopyHighlightedButton();
        performTranslation();
    });
    </script>
</body>
</html>
