<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Call Logger & Abbreviation Translator</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background-color: #f4f4f4; color: #333; }
        .main-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .container { display: flex; gap: 20px; width: 100%; margin-bottom: 20px; }
        .box { flex: 1; background-color: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); display: flex; flex-direction: column; }
        
        textarea, .textarea-lookalike {
            width: 100%;
            box-sizing: border-box;
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            resize: vertical;
            height: 150px;
            font-family: sans-serif;
            line-height: 1.5;
        }
        .textarea-lookalike {
            background-color: #e9ecef;
            overflow-y: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        h1, h2 { color: #0056b3; margin-top: 0; }
        .box h2 {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-bottom: 10px;
        }

        .action-btn {
            padding: 6px 12px;
            font-size: 14px;
            cursor: pointer;
            border: 1px solid #0056b3;
            background-color: #007bff;
            color: white;
            border-radius: 5px;
            margin-left: 10px;
            line-height: 1.2;
            text-align: center;
            flex-shrink: 0;
        }
        .action-btn:hover {
            background-color: #0056b3;
        }
        .btn-subtext {
            font-size: 10px;
            font-weight: normal;
            opacity: 0.8;
            display: block;
        }

        #abbreviationsContainer { margin-top: 20px; padding-top: 20px; border-top: 1px solid #ddd; }
        .abbreviations-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .section {
            background-color: #fff;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .section-title {
            font-weight: bold;
            color: #0056b3;
            font-size: 1.2em;
            margin: 0;
            cursor: pointer;
            position: relative;
            padding-right: 20px;
        }

        .section-title::after {
            content: 'â–¶';
            position: absolute;
            right: 5px;
            font-size: 0.8em;
            transition: transform 0.2s;
        }

        .section-title.active::after {
            transform: rotate(90deg);
        }
        
        .section-content {
            display: none;
            padding-top: 15px;
        }

        .section-content.active {
            display: block;
        }
        
        .subsection-title, .template-title {
            font-weight: bold;
            color: #333;
            font-size: 1.1em;
            margin-top: 10px;
            margin-bottom: 5px;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
        }
        
        .template-title {
             display: inline;
             border-bottom: none;
             margin-right: 10px;
        }

        .term-list {
            list-style-type: none;
            padding-left: 0;
            margin: 10px 0 0 0;
            font-size: 14px;
            column-count: 3;
            column-gap: 20px;
        }
        
        .template-list, .term-list-single-col {
             list-style-type: none;
             padding-left: 0;
             margin: 0;
             column-count: 1;
        }
        
        .template-list li, .term-list-single-col li {
             margin-bottom: 10px;
        }

        .term-list li {
            margin-bottom: 4px;
            -webkit-column-break-inside: avoid;
            page-break-inside: avoid;
            break-inside: avoid;
        }
        
        .toggle-def-btn {
            margin-left: 5px;
            padding: 2px 6px;
            font-size: 12px;
            cursor: pointer;
        }
        .collapsible-def {
            display: none;
            white-space: pre-wrap;
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-left: 3px solid #007bff;
            padding: 10px;
            margin-top: 5px;
            border-radius: 4px;
            font-family: monospace;
        }
        .collapsible-def.visible {
            display: block;
        }
        
        mark {
            background-color: yellow;
            color: black;
        }

        @media (max-width: 900px) { .term-list { column-count: 2; } }
        @media (max-width: 600px) { .container { flex-direction: column; } .term-list { column-count: 1; } }
    </style>
</head>
<body>
    <div class="main-header">
        <h1>Call Logger & Abbreviation Translator</h1>
    </div>
    <div class="container">
        <div class="box">
            <h2>Enter Text Here:</h2>
            <textarea id="inputText" placeholder="Start typing... for example: tc rq ntr"></textarea>
        </div>
        <div class="box">
            <h2>Translated Text</h2>
            <div id="translatedText" class="textarea-lookalike"></div>
        </div>
        <div class="box">
            <h2>
                Scratch Pad
                <button id="rewordBtn" class="action-btn">Re-word</button>
            </h2>
            <textarea id="scratchPad" placeholder="Your notes here..."></textarea>
        </div>
    </div>
    <div id="abbreviationsContainer">
        <div class="abbreviations-header">
            <h2>Available Abbreviations</h2>
            <div>
                <button id="copyHighlightedBtn" class="action-btn">
                    Copy To Scratch Pad
                    <span class="btn-subtext">(what you highlight)</span>
                </button>
                <button id="toggleAllBtn" class="action-btn">Toggle All</button>
            </div>
        </div>
        <div id="abbreviationsList"></div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const masterList = [
            {
                main_section: "Phrase Components",
                sub_sections: [
                    {
                        title: "Subjects",
                        components: [
                            { abbr: "i", text: "I" },
                            { abbr: "tc", text: "The customer" },
                            { abbr: "td", text: "Their dealer" },
                        ]
                    },
                    {
                        title: "Verbs",
                        components: [
                            { abbr: "st", text: "states" },
                            { abbr: "wa", text: "wants" },
                            { abbr: "fe", text: "feels" },
                            { abbr: "al", text: "alleges" },
                            { abbr: "up", text: "is upset that" },
                            { abbr: "cb", text: "called because" },
                            { abbr: "cs", text: "called about" },
                            { abbr: "av", text: "advised" },
                            { abbr: "ed", text: "educated them on" },
                            { abbr: "in", text: "informed them that" },
                            { abbr: "cf", text: "confirmed" },
                            { abbr: "des", text: "de-escalated" },
                            { abbr: "prv", text: "provided the customer" },
                            { abbr: "dia", text: "diagnosed the issue as" },
                            { abbr: "rfi", text: "requested information on" },
                            { abbr: "mde", text: "made" },
                            { abbr: "l/v", text: "left voicemail for" },
                            { abbr: "t/t", text: "transferred to" },
                            { abbr: "cnd", text: "could not duplicate the concern.", is_complete: true },
                        ]
                    },
                    {
                        title: "Actions/Modifiers",
                        components: [
                             { abbr: "rq", text: "require/d/s/ing" },
                        ]
                    },
                    {
                        title: "Objects & Clauses",
                        components: [
                            { abbr: "wr", text: "warranty rental reimbursement." },
                            { abbr: "sbc", text: "their repair should be covered." },
                            { abbr: "ntr", text: "a transmission replacement." },
                            { abbr: "mrr", text: "major repairs." },
                            { abbr: "bbr", text: "a buyback review." },
                            { abbr: "cmp", text: "compensation." },
                            { abbr: "dam", text: "the dealer caused further damages." },
                            { abbr: "ddn", text: "their dealer is not diagnosing fast enough." },
                            { abbr: "oae", text: "their owning advisor is not meeting communication expectations." },
                            { abbr: "rpl", text: "a replacement vehicle." },
                            { abbr: "rec", text: "more information about a recall." },
                            { abbr: "sc",  text: "a special coverage." },
                            { abbr: "sts", text: "the status of their repair." },
                            { abbr: "upd", text: "an update." },
                            { abbr: "oaw", text: "their owning advisor is working on the request." },
                            { abbr: "ctp", text: "the Courtesy Transportation Program guidelines." },
                            { abbr: "nnu", text: "there is no new update from the dealership at this time." },
                            { abbr: "dny", text: "their repurchase request was denied." },
                            { abbr: "bbb", text: "and referred them to the BBB." },
                            { abbr: "doc", text: "to send the appropriate documentation." },
                            { abbr: "cas", text: "on the GM Cost Assistance policy." },
                            { abbr: "cn",  text: "with their case number." },
                            { abbr: "lvm", text: "and left a detailed voicemail." },
                            { abbr: "dcl", text: "that I would have to disconnect the call if the behavior continued." },
                            { abbr: "sit", text: "the situation with the customer." },
                            { abbr: "ddi", text: "that the dealer determines final coverage post-diagnosis." },
                            { abbr: "vin", text: "the vehicle's VIN." },
                            { abbr: "mil", text: "the current mileage." },
                            { abbr: "dlr", text: "the dealer." },
                            { abbr: "pd",  text: "a parts delay." },
                            { abbr: "fu",  text: "a follow-up." },
                            { abbr: "sr",  text: "the Service Request." },
                            { abbr: "tac", text: "the Technical Assistance Center." },
                            { abbr: "cem", text: "the Customer Experience Manager." },
                            { abbr: "dsm", text: "the Dealer Service Manager." },
                            { abbr: "rsa", text: "Roadside Assistance." },
                        ]
                    }
                ]
            },
            {
                main_section: "Checklists & Verbiage",
                is_template_section: true,
                templates: [
                    { abbr: "bcl", title: "Buyback Checklist", text: "Mileage: \nCurrent Concerns: \nIs the vehicle currently at a GM dealership? (Yes/No) \nRepair Order Open Date: \nDiagnosis: \nIs the customer in a courtesy/rental vehicle? \nDealership & Customer Feedback: \nImportant vehicle information or feedback from the dealership: \nAssistance & Involvement: \nHas any goodwill or cost assistance been offered? (Yes/No) \nHas TAC been involved? (Yes/No) \nTAC case number and feedback: \nName of CEM at the dealer: \nSelling Information: \nDate vehicle was purchased: \nWas the customer in the military at time of purchase? (Yes/No) \nSelling dealer name and BAC: \nVehicle delivery type: \nWas the vehicle purchased new or used? \nTOTAL days vehicle has been down: \nSummary: \nBrief Repair Summary: \nAny other relevant facts for the business case:" },
                    { abbr: "icl", title: "Initial Customer Intake", text: "VEHICLE:\nVEHICLE SYMPTOMS:\nVIN:\nMILEAGE:\nVEHICLE LOCATION:\nAPPT/REPAIR STATUS:\nDLR/BAC:\nDIAGNOSIS:\nREPAIR ETA:\nPREVIOUS COMPLAINTS:\nBAC PROVIDE COURTESY TRANS?\nVEHICLE PURPOSE: Personal Use\nVEHICLE DELIVERY TYPE: Retail/Individual\nBTTC:\nCUSTOMER PROFILE:\nREGION:" },
                    { abbr: "bbd", title: "Buyback Denial Verbiage", text: "Your request was carefully reviewed, and General Motors is declining your request for a repurchase.\nIf you would like more information, the BBB AUTO LINE website provides each stateâ€™s specific lemon law guidelines and the requirements to meet eligibility. Their website is: www.bbbautoline.org. In addition, your Ownerâ€™s Manual and Warranty booklet provides an overview on how to utilize the BBB AUTO LINE dispute process." },
                    { abbr: "pwc", title: "Paint Warranty", text: "Chevrolet's paint warranty covers defects related to materials or workmanship.\nKey Coverage Details:\n- Surface Corrosion: Body sheet metal panels are covered against rust for 3 years or 36,000 miles, whichever comes first.\n- Rust-Through Corrosion: Body sheet metal panels that develop an actual hole due to rust-through are covered for 6 years or 100,000 miles, whichever comes first.\n- Chemical Paint Spotting: Damage from airborne pollutants causing blotchy, ring-shaped discolorations or irregular dark spots is covered for 12 months or 12,000 miles, whichever comes first, even though it's not a factory paint defect.\n- Minor Chips/Scratches: Quickly repair minor chips and scratches with touch-up materials from your dealer to avoid corrosion.\n- Collision Damage: Original manufacturer replacement parts will provide corrosion protection and maintain the vehicle warranty after sheet metal repair or replacement.\nWhat is NOT Covered (Paint):\n- Cosmetic/Surface Corrosion: Rust resulting from stone chips, dents, or scratches in the paint, or failure to repair such damage, is not included.\n- Environmental Damage: Damage caused by airborne fallout, rail dust, salt (from sea air or road conditions), chemicals, tree sap, insects, stones, hail, earthquakes, water/floods, windstorms, or lightning, and other environmental conditions is not covered.\n- After-manufacture Treatments: Damage caused by the application of after-manufacture rustproofing products or other chemical sealants is not covered, as these may reduce the vehicle's built-in corrosion resistance.\n- Improper Cleaning Agents/Methods:\n  - Damage from using petroleum-based, acidic, or abrasive cleaning agents on paint, metal, or plastic parts is not covered.\n  - Machine compounding or aggressive polishing on basecoat/clearcoat paint finish may damage it and is cautioned against.\n  - Failure to clean and protect bright metal moldings can result in hazy white finish or pitting, which is not covered.\n  - Damage to chrome wheels and trim if the vehicle is not washed after exposure to magnesium chloride or calcium chloride (used for dust/ice control on roads).\n  - Using petroleum-based tire dressing products on painted surfaces.\n  - Power washing components under the hood or the vehicle's interior can cause damage that is not covered by the warranty. If a pressure washer is used, specific criteria must be followed (e.g., pressure below 14,000 kPa (2,000 PSI), water temperature below 80Â°C (180Â°F), nozzle at least 30 cm (1 ft) away).\n- Original Equipment Alterations: Any damage or failure from modifications, alterations, or tampering to the vehicle's original equipment, including non-GM parts, calibrations, or software modifications, can void warranty coverage for affected components.\n- Collision Damage: Damage resulting from collision, fire, theft, freezing, vandalism, riot, explosion, or objects striking the vehicle is not covered. Poorly performed collision repairs can diminish resale value and compromise safety performance. Aftermarket collision parts are also not covered by the GM New Vehicle Limited Warranty, and related failures are excluded." },
                    { abbr: "twc", title: "Tire Warranty", text: "Tires supplied with your Chevrolet vehicle are covered under the Bumper-to-Bumper coverage against defects in material or workmanship.\nKey Coverage Details:\n- Initial Period: For vehicles within the Bumper-to-Bumper coverage (typically 3 years or 36,000 miles, whichever comes first), defective tires will be replaced on a prorated adjustment basis for the tire cost. Chevrolet covers 100% of the cost to mount and balance tires replaced under warranty during this full Bumper-to-Bumper period.\n- Prorated Schedule (Tire Cost):\n  - 0-12,000 miles: 100% covered by Chevrolet\n  - 12,001-15,000 miles: 60% covered by Chevrolet\n  - 15,001-20,000 miles: 50% covered by Chevrolet\n  - 20,001-25,000 miles: 40% covered by Chevrolet\n  - 25,001-30,000 miles: 30% covered by Chevrolet\n  - 30,001-36,000 miles: 20% covered by Chevrolet\n  - 36,000+ miles: 0% covered by Chevrolet\n- After Bumper-to-Bumper: After the Bumper-to-Bumper coverage expires, you may still have prorated warranty coverage on your original equipment tires directly from the tire manufacturer. You should contact your dealer or the tire manufacturer for more information.\n- Service: Any authorized Chevrolet or tire dealer can assist with tire service.\nWhat is NOT Covered (Tires):\n- Normal Wear and Wear-out: Normal tire wear or wear-out is not considered a defect and is therefore not covered. Tire wear is influenced by factors like road conditions, driving styles, vehicle weight, and tire construction. Uniform tire wear is considered a normal condition.\n- Road Hazard Damage: Damage such as punctures, cuts, snags, and breaks resulting from pothole impacts, curb impacts, or other objects is not covered.\n- Misuse/Improper Operation: Damage from improper inflation, overloading, spinning (e.g., stuck in mud or snow), tire chains, racing, improper mounting/dismounting, misuse, negligence, alteration, improper repair, accident, collision, fire, vandalism, or misapplication is not covered.\n- Automatic Car Washes/Cleaning Agents: Damage to wheels or tire sidewalls caused by automatic car washes or cleaning agents is not covered. Specifically, driving through automatic car washes that use silicon carbide tire/wheel cleaning brushes can cause damage not covered by warranty.\n- TPMS Sensors: TPMS sensor damage caused by using non-GM approved tire sealant or non-GM valve caps is not covered by the vehicle warranty.\n- Tire Alignment: Tire wear due to misalignment beyond the warranty period is not covered. Factory alignment and balance are for longest life and best performance, and adjustments are not necessary regularly.\nImportant Tire-Related Information:\n- GM recommends using TOP TIER Detergent Gasoline to keep the engine clean and maintain optimal performance.\n- GM strongly recommends buying replacement tires with the same TPC Spec rating as the original equipment tires, as this system considers many specifications for vehicle performance (e.g., braking, handling, traction control, TPMS). If a TPC Spec tire is unavailable, replacements should be the same size, load range, speed rating, and construction (radial).\n- All-season tires provide adequate performance for most winter driving conditions but may not offer the same traction as winter tires on snow or ice. Winter tires are designed for increased traction on snow/ice but may have decreased dry road traction, increased road noise, and shorter tread life.\n- Tires should be rotated every 12,000 km (7,500 mi). The first rotation is most important.\n- GM recommends that tires, including the spare, be replaced after six years, regardless of tread wear, due to rubber aging.\n- You are responsible for maintaining correct tire pressure, even if the TPMS low tire pressure telltale has not illuminated." },
                    { abbr: "req", title: "Required Elements of a Business Case Checklist", text: "This checklist outlines the minimum required elements for a business case justification. Cases may be returned if the business case is insufficient.\n\nCar Payment(s)\n- Indicate whether the customer was placed in a rental or loaner.\n- Include the number of calendar days the vehicle was out of service.\n- Confirm vehicle information (VIN, YMM, mileage, warranty start date, and in/out of warranty) is documented in the SR.\n\nComponent Coverage Letter (CCL)\n- List the major repairs with the number of instances.\n\nCost Assistance\n- Include the number of new vehicles purchased by the customer based on company records.\n\nOwner Loyalty Certificate (OLC)\n- Document the MSRP.\n- The business case must state, \"The customer has purchased X new vehicles based on our records\".\n- Confirm vehicle information is documented in the SR.\n\nPre-Paid Trip Reservations\n- Include the number of new vehicles purchased by the customer.\n\nRental Reimbursement\n- If a rental was provided, the number of days the vehicle was down and the number of days the customer was in the rental are required." },
                    { abbr: "ggo", title: "General Guidelines for All Compensation Offers", text: "This provides a checklist for decision-making on all compensation offers.\n\nALWAYS\n- Be a good steward of GM funds.\n- The vehicle must be repaired before the offer is made.\n- The earlier in the vehicle's lifecycle, the smaller the offer should be.\n- Start with a small offer so that additional compensation is available if needed.\n- The compensation tool should work to resolve the customer's current issue.\n- The value of the compensation should match the seriousness of the situation.\n- Guidelines for each specific compensation tool must be followed.\n\nNEVER\n- Offer compensation on Canadian vehicles (exceptions apply to OnStar, CCLs, and CBGC plans).\n- Offer car payments or rental reimbursement when the dealer has followed Courtesy Transportation Guidelines.\n- Reimburse for concerns that have not been duplicated by the dealership.\n- Offer compensation for diagnoses that are a normal characteristic of the vehicle.\n- Offer for issues already resolved by Legal Case Management (LCM).\n- To resolve sales issues.\n- As compensation for a delayed delivery.\n- For out-of-warranty wear-and-tear or maintenance items.\n- On a vehicle with a branded or salvaged title.\n- When a customer states they have retained an attorney." },
                    { abbr: "crc", title: "Cost Assistance Request Checklist", text: "This checklist guides the process when a customer requests financial help with a repair.\n\nConfirm Diagnosis: Verify the vehicle has been diagnosed by a GM dealer within the last 60 days. If not, direct the customer to a dealer without indicating that assistance will be offered.\n\nCheck for Exclusions:\n- Confirm there are no open field actions related to the concern.\n- Ensure the request is not for something that should be denied, such as standard maintenance, damage from an independent facility or natural hazard, or a vehicle with a branded title.\n\nVerify Dealer Discussion: Confirm the customer has already discussed the request with their dealer. If not, direct them to do so first.\n\nRun Policy Evaluation Tool (PET):\n- Use the actual repair estimate, not $1.\n- If the PET result is \"NOT eligible,\" cost assistance should be denied.\n- If the PET result is \"MAY BE ELIGIBLE,\" inform the customer their request will be reviewed with the dealer, but do not promise assistance or disclose the amount.\n\nPartner with the Dealer: Reach out to the dealer to see if they plan to offer assistance. The goal is to make the dealer the hero." },
                    { abbr: "old", title: "Owner Loyalty Certificate (OLC) Decision Flow", text: "This is a step-by-step checklist to determine if an OLC should be offered and for how much.\n\n- Is the vehicle still within its bumper-to-bumper warranty?\n  If YES, do not offer an OLC.\n\n- Is the OLC being offered in combination with MyRewards or cost assistance?\n  If YES, do not offer an OLC.\n\n- Does the customer's situation fall into any other restrictions (e.g., vehicle sold in California, branded title, fleet delivery type)?\n  If YES, do not offer an OLC.\n\n- Has the customer ever purchased a new GM vehicle?\n  If NO, the OLC amount may not be more than $1,500.\n\n- Is the customer the first or second owner of the vehicle?\n  If NO (i.e., they are the third owner or later), the OLC may not be more than $2,500.\n  If YES, the OLC may be offered up to 10% of the MSRP, with amounts over $2,500 requiring pre-approval." },
                    { abbr: "ccr", title: "Component Coverage Letter (CCL) Restrictions Checklist", text: "A Component Coverage Letter may not be offered in these situations:\n\n- For emissions or electrical concerns.\n- Unless all current repairs have been completed with GM parts at a GM dealership.\n- To enhance a new or used vehicle sale.\n- For 3rd+ owners, coverage cannot exceed 12 months/15,000 miles past the warranty.\n- To offset costs for a customer who falls within a special coverage or class action.\n- On vehicles with salvaged or branded titles or a warranty block.\n- For wear-and-tear components (e.g., brake pads, tires).\n- On Medium Duty vehicles or vehicles with a fleet delivery type.\n- On vehicles registered, sold, or serviced in California, New Hampshire, or Vermont." },
                    { abbr: "cpr", title: "Car Payment Reimbursement Checklist", text: "This tool can be considered under the following conditions:\n\nEligibility\n- The vehicle must have an extended dealership stay of 20 or more days.\n- The stay must be for a reason outside the customer's control.\n- Repairs must have been completed under warranty at a GM dealer.\n- The offer is for in-warranty vehicles for parts delay or extended diagnosis/repair.\n\nRestrictions\n- A car payment may not be offered unless all current repairs are complete.\n- It may not be offered for the same time period as a rental reimbursement without approval.\n- It cannot be offered if a loaner vehicle was provided, without approval.\n- It is not for body shop repairs or on vehicles with branded/salvaged titles." }
                ]
            },
            {
                main_section: "Common Complaints",
                sub_sections: [ 
                    { title: "Performance Issues", terms: { "pfe": "Poor Fuel Economy", "rid": "Rough Idling", "hes": "Hesitation on Acceleration", "stl": "Stalling" } }, 
                    { title: "Noises & Leaks", terms: { "wnz": "Wind Noise", "wlk": "Water Leaks", "exn": "Exhaust Noise", "msl": "Musty/Bad Smell from Vents" } }, 
                    { title: "Interior & Tech", terms: { "anc": "A/C Not Blowing Cold", "use": "Uncomfortable Seats", "blu": "Bluetooth Connectivity Issues", "nav": "Navigation System Problems", "wlt": "Warning Lights On" } }, 
                    { title: "Exterior & Misc.", terms: { "ppl": "Peeling Paint", "irp": "Improper Repairs", "hpr": "High Prices", "udl": "Unexpected Delays" } },
                    { title: "Sales Issues", terms: { "bsp": "Bait-and-Switch Pricing", "uef": "Unexpected Fees", "odf": "Odometer Fraud", "lmv": "Lemon Vehicles" } } 
                ]
            },
            {
                main_section: "Vehicles & Parts",
                sub_sections: [ 
                    { title: "General Parts & Issues", terms: { "ab": "Air-Bag", "oc": "Oil Consumption Issues", "pc": "Part/s of concern", "pwst": "Power Steering Loss" } },
                    { title: "Engine Problems", terms: { "cel": "Check Engine Light", "oht": "Overheating", "msf": "Misfires or Sputtering", "knp": "Knocking/Pinging Sounds" } },
                    { title: "Braking Issues", terms: { "nbk": "Noisy Brakes", "sbk": "Spongy or Soft Pedal", "vbp": "Vibrations/Pulsations" } },
                    { title: "Transmission Problems", terms: { "tsl": "Slipping", "hsh": "Harsh or Delayed Shifting", "tfl": "Transmission Fluid Leaks" } },
                    { title: "Electrical System", terms: { "dbt": "Dead Battery", "fsr": "Faulty Starter Motor", "dml": "Dimming Lights or Whining Noise" } },
                    { title: "Chevrolet Models", terms: { "bev": "Bolt EV", "blz": "Blazer", "bze": "Blazer EV", "cmr": "Camaro", "col": "Colorado", "crv": "Corvette", "crz": "Cruze", "equ": "Equinox", "eqv": "Equinox EV", "exp": "Express", "imp": "Impala", "mal": "Malibu", "s15": "Silverado 1500", "s2h": "Silverado 2500HD", "s3h": "Silverado 3500HD", "sev": "Silverado EV", "snc": "Sonic", "spk": "Spark", "ss": "SS", "sub": "Suburban", "tah": "Tahoe", "trl": "Trailblazer", "tra": "Traverse", "ax": "Trax", "vlt": "Volt" } },
                    { title: "Buick Models", terms: { "csc": "Cascada", "enr": "Encore", "egx": "Encore GX", "enc": "Enclave", "env": "Envision", "evs": "Envista", "lcx": "LaCrosse", "rgl": "Regal", "vrn": "Verano" } },
                    { title: "Cadillac Models", terms: { "ats": "ATS", "atv": "ATS-V", "ceq": "Celestiq", "ct4": "CT4", "ct5": "CT5", "c5v": "CT5-V", "ct6": "CT6", "c6v": "CT6-V", "cts": "CTS", "ctv": "CTS-V", "elr": "ELR", "esc": "Escalade", "esv": "Escalade ESV", "iql": "Escalade IQL", "lyq": "Lyriq", "opt": "Optiq", "srx": "SRX", "vis": "Vistiq", "xts": "XTS", "xt4": "XT4", "xt5": "XT5", "xt6": "XT6" } },
                    { title: "GMC Models", terms: { "aca": "Acadia", "can": "Canyon", "hep": "Hummer EV Pickup", "hes": "Hummer EV SUV", "sav": "Savana", "sie": "Sierra", "g15": "Sierra 1500", "g2h": "Sierra 2500HD", "g3h": "Sierra 3500HD", "gev": "Sierra EV", "ter": "Terrain", "yuk": "Yukon", "yxl": "Yukon XL" } },
                    { title: "Major Components & Systems", terms: { "ac": "Air Conditioning", "dic": "Driver Information Cluster", "elec": "Electrical System", "eng": "Engine", "hvac": "Heating & Cooling", "ivi": "In-Vehicle Infotainment", "rbc": "Rear Back-Up Camera", "sft": "Software", "tran": "Transmission" } },  
                ]
            },
            {
                main_section: "Concepts & Coverages",
                sub_sections: [ { title: "Formal", terms: { "btb": "Bumper To Bumper", "ca": "Cost Assistance", "ccl": "Component Coverage Letter", "cpo": "Certified Pre-Owned", "exw": "Extended Warranty", "pwt": "Powertrain", "sc": "Special Coverage" } }, { title: "General", terms: { "iss": "issue", "lob": "Line of Business", "ons": "Onstar", "cpl": "Complaint" } } ]
            },
            {
                main_section: "Processes",
                sub_sections: [ { title: "Service & Repair", terms: { "app": "Appointment", "diag": "Diagnosis.", "dr": "Delayed Repair", "pd": "Part Delay", "rre": "Repeat Repairs/Appointments Failed Remedies" } }, { title: "Case Management", terms: { "ixf": "Inbound call from other department Transfer...", "cae": "The customer confirmed they reside in California...", "cxd": "Customer was transferred to the applicable department.", "int": "Internal: I was not able to find anything I could assist...", "les": "The customer requested escalation to supervisor...", "reg": "Advised customer of regional escalation...", "tle": "Manager Escalation Follow-Up Phone Call...", "u1": "Unable to Contact 1st Attempt-LVM?...", "u2": "Unable to Contact 2nd Attempt-LVM?...", "u3": "Unable to Contact 3rd and Final Attempt-LVM?" } }, { title: "Specific Programs", terms: { "bb": "Repurchase/Buyback", "ctp": "Courtesy Transportation Program", "mrp": "General Motors My Rewards Points Program", "prc": "Post-Repair Discussion About Potential Compensation...", "reu": "Reunification Program", "rsa": "General Motors Roadside Warranty Assistance", "tre": "Tread Escalation" } } ]
            },
            {
                main_section: "Actions",
                sub_sections: [ { title: "Agent Actions", terms: { "ass": "Assisting", "fu": "Follow-Up", "goo": "Googled and found forums alleging known issues", "ic": "Confirmed", "mtc": "Move To Close Case", "pr": "Customer will call back post-repair", "rfi": "Request For Information", "sch": "Schedule", "roc": "Since the customer requested further assistance from their owning advisor and the case was closed prior. I have reopned this case per customer request." } }, { title: "Dealer/System Actions", terms: { "acc": "Accelerate", "aco": "Accomodate/tion", "cnd": "Could Not Duplicate", "dd": "The Dealer Diagnosed", "drf": "The Dealer Referred The Customer", "dln": "Dealer did not provide a loaner", "dly": "Dealer did provide a loaner", "fai": "Failed", "pro": "Dealer Programmed", "rep": "Repair/s", "rpl": "Replace/ment", "rpr": "Dealer Reprogrammed", "ser": "service", "ts": "Troubleshoot/ing" } } ]
            },
            {
                main_section: "Documents & Identifiers",
                sub_sections: [ { title: "Case & Vehicle", terms: { "add": "Customer Mailing Address.", "cn": "Case Number:", "cr": "The Customer Resides In", "ct": "Call Type (IBCC/OBCC):", "dn": "Dealer Name:", "mil": "Current Vehicle Mileage:", "o": "Outcome:", "r": "Reason:", "sr": "Service Request", "sym": "Symptoms:", "vin": "Vehicle V.I.N." } }, { title: "Documents & Records", terms: { "bul": "Bulletin", "clg": "Case Information", "cd": "Call Details", "del": "Delivery Type", "doc": "Documentation/s", "em": "Email", "esi": "Insurance and liability claims (fire and/or medical)", "eta": "Estimated Time of Arrival/Repair", "fi": "Final Invoice", "gl": "GM Guidelines.", "om": "Owner's Manual", "pac": "PAC-Product Allegation (property damage,defect cause collision)", "pal": "Product Allegation", "pdf": "PDF Document", "tsb": "Technical Service Bulletin" } } ]
            },
            {
                main_section: "Places & Departments",
                sub_sections: [ { title: "GM & Dealer", terms: { "bac": "GM Dealer/BAC", "bu": "Business Unit.", "cac": "GM Customer Assistance Center", "ccd": "Cadillac Customer Care Team", "div": "GM Divisional Office", "dlr": "GM Dealer", "dpt": "Department", "gmf": "GM FInancial", "pdt": "Part Delay Team", "tac": "Technical Assistance Center (Dealer invite only)" } }, { title: "External & Other", terms: { "ind": "Independent Dealer/Supplier/Auto Mechanic", "bbb": "Better Business Bureau verbiage" } } ]
            },
            {
                main_section: "People & Roles",
                sub_sections: [ { title: "Dealer Roles", terms: { "ds": "Dealer Sales Manager", "dms": "Dealer Service Manager.", "dsa": "GM Sales at Dealer", "sd": "GM Dealer Service Director.", "tech": "Service Technician" } }, { title: "Corporate & Field", terms: { "cem": "Customer Experience Manager", "fse": "Field Service Engineer (Dealer Invite Only)", "rfl": "Regional Field Liason" } }, { title: "General", terms: { "cx": "Customer", "mfr": "manufacturer", "oa": "Owning Advisor" } } ]
            },
            {
                main_section: "Leverage",
                sub_sections: [
                    { title: "Non-GM Websites", terms: { "nht": "NHTSA.gov (Recalls): <a href='https://www.nhtsa.gov/recalls' target='_blank'>www.nhtsa.gov/recalls</a>", "cfx": "CARFAX.com: <a href='https://www.carfax.com' target='_blank'>www.carfax.com</a>", "ach": "AutoCheck.com: <a href='https://www.autocheck.com' target='_blank'>www.autocheck.com</a>", "nmv": "NMVTIS Approved Providers: <a href='https://vehiclehistory.bja.ojp.gov' target='_blank'>vehiclehistory.bja.ojp.gov</a>", "ytb": "YouTube.com (for DIY videos): <a href='https://www.youtube.com' target='_blank'>www.youtube.com</a>", "mdf": "Model-Specific Forums: (e.g., search for 'Chevy Equinox forum')", "rdt": "Reddit (r/MechanicAdvice, etc.): <a href='https://www.reddit.com' target='_blank'>www.reddit.com</a>", "ald": "ALLDATA DIY: <a href='https://www.alldata.com/diy-us/en' target='_blank'>www.alldata.com/diy-us/en</a>" } },
                    { title: "GM Websites", terms: { "gcu": "GM.com Contact Us: <a href='https://www.gm.com/contact-us' target='_blank'>www.gm.com/contact-us</a>", "csv": "Chevrolet Vehicle Support: <a href='https://www.chevrolet.com/support/vehicle' target='_blank'>www.chevrolet.com/support/vehicle</a>", "ons": "OnStar.com: <a href='https://www.onstar.com' target='_blank'>www.onstar.com</a>" } },
                    { title: "Important Phone Numbers", terms: { "gml": "General Motors (Lemon Law): 1-866-636-2273", "cas": "Chevrolet Customer Assistance: 1-800-222-1020", "bca": "Buick Customer Assistance: 1-800-521-7300", "gfe": "GM Financial Customer Experience: 1-800-284-2271", "gmr": "GM Rewards: 1-844-764-2665", "ocs": "OnStar Customer Service: 1-888-466-7827", "tty": "TTY/TDD Relay Service: 711" } }
                ]
            }
        ];

        const inputText = document.getElementById('inputText');
        const translatedText = document.getElementById('translatedText');
        const scratchPad = document.getElementById('scratchPad');
        const abbreviationsListDiv = document.getElementById('abbreviationsList');
        
        const subjectMap = new Map();
        const verbMap = new Map();
        const objectMap = new Map();
        const regularLookup = new Map();

        function capitalizeFirstLetter(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }

        masterList.forEach(section => {
            if (section.main_section === "Phrase Components") {
                 section.sub_sections.forEach(sub => {
                    (sub.components || []).forEach(item => {
                        if(sub.title === "Subjects") subjectMap.set(item.abbr, item);
                        if(sub.title === "Verbs" || sub.title === "Actions/Modifiers") verbMap.set(item.abbr, item);
                        if(sub.title === "Objects & Clauses") objectMap.set(item.abbr, item);
                    });
                 });
            } else if (section.is_template_section) {
                (section.templates || []).forEach(template => {
                    if (template.abbr) regularLookup.set(template.abbr.toLowerCase(), template.text);
                });
            } else {
                (section.sub_sections || []).forEach(subSection => {
                    for (const abbr in subSection.terms) {
                        regularLookup.set(abbr.toLowerCase(), subSection.terms[abbr]);
                    }
                });
            }
        });

        function performTranslation() {
            const text = inputText.value;
            const words = text.split(/(\s+)/);
            let finalHtml = '';
            let i = 0;

            while (i < words.length) {
                let consumedCount = 0;

                const p1 = words[i]?.toLowerCase();
                
                if (p1 && p1.trim() !== '') {
                    const p2 = (i + 2 < words.length) ? words[i + 2]?.toLowerCase() : undefined;
                    const p3 = (i + 4 < words.length) ? words[i + 4]?.toLowerCase() : undefined;

                    if (p1 && p2 && p3 && subjectMap.has(p1) && verbMap.has(p2) && !verbMap.get(p2).is_complete && objectMap.has(p3)) {
                        const subject = subjectMap.get(p1);
                        const verb = verbMap.get(p2);
                        const object = objectMap.get(p3);
                        let sentence = `${subject.text} ${verb.text} ${object.text}`;
                        finalHtml += capitalizeFirstLetter(sentence);
                        consumedCount = 5;
                    }
                    else if (p1 && p2 && subjectMap.has(p1) && verbMap.has(p2) && verbMap.get(p2).is_complete) {
                        const subject = subjectMap.get(p1);
                        const verb = verbMap.get(p2);
                        let sentence = `${subject.text} ${verb.text}`;
                        finalHtml += capitalizeFirstLetter(sentence);
                        consumedCount = 3;
                    }
                }
                
                if (consumedCount > 0) {
                    i += consumedCount;
                } else {
                    const word = words[i];
                    if (word) {
                        const lowerWord = word.toLowerCase();
                        if (regularLookup.has(lowerWord)) {
                            finalHtml += regularLookup.get(lowerWord);
                        } else {
                            finalHtml += word;
                        }
                    }
                    i++;
                }
            }
            translatedText.innerHTML = finalHtml;
        }

        function populateAbbreviationsList() {
            abbreviationsListDiv.innerHTML = '';
            masterList.forEach(mainSection => {
                const sectionDiv = document.createElement('div');
                sectionDiv.className = 'section';
                const title = document.createElement('h2');
                title.className = 'section-title';
                title.textContent = mainSection.main_section;
                const contentDiv = document.createElement('div');
                contentDiv.className = 'section-content';

                if (mainSection.main_section === "Phrase Components") {
                    (mainSection.sub_sections || []).forEach(subSection => {
                        const subTitle = document.createElement('h3');
                        subTitle.className = 'subsection-title';
                        subTitle.textContent = subSection.title;
                        contentDiv.appendChild(subTitle);
                        
                        const list = document.createElement('ul');
                        list.className = 'term-list-single-col';
                        (subSection.components || []).forEach(item => {
                            const listItem = document.createElement('li');
                            listItem.innerHTML = `<strong>${item.abbr}</strong>: ${item.text}`;
                            list.appendChild(listItem);
                        });
                        contentDiv.appendChild(list);
                    });
                } else if (mainSection.is_template_section) {
                    const templateList = document.createElement('ul');
                    templateList.className = 'template-list';
                    (mainSection.templates || []).forEach(template => {
                        const listItem = document.createElement('li');
                        let titleHtml = template.abbr ? `<strong>${template.abbr}</strong>: <span class="template-title">${template.title}</span>` : `<h4 class="template-title">${template.title}</h4>`;
                        let definitionHtml = `<div class="collapsible-def">${template.text}</div>`;
                        listItem.innerHTML = `${titleHtml} <button class="toggle-def-btn">[Show]</button> ${definitionHtml}`;
                        templateList.appendChild(listItem);
                    });
                    contentDiv.appendChild(templateList);
                } else {
                    (mainSection.sub_sections || []).forEach(subSection => {
                        const subTitle = document.createElement('h3');
                        subTitle.className = 'subsection-title';
                        subTitle.textContent = subSection.title;
                        contentDiv.appendChild(subTitle);
                        const list = document.createElement('ul');
                        list.className = 'term-list';
                        const sortedTerms = Object.keys(subSection.terms || {}).sort();
                        sortedTerms.forEach(term => {
                            const listItem = document.createElement('li');
                            listItem.innerHTML = `<strong>${term}</strong>: ${subSection.terms[term]}`;
                            list.appendChild(listItem);
                        });
                        contentDiv.appendChild(list);
                    });
                }

                title.addEventListener('click', () => {
                    title.classList.toggle('active');
                    contentDiv.classList.toggle('active');
                });
                sectionDiv.appendChild(title);
                sectionDiv.appendChild(contentDiv);
                abbreviationsListDiv.appendChild(sectionDiv);
            });
        }
        
        function setupToggleAllButton() {
            const toggleBtn = document.getElementById('toggleAllBtn');
             if (toggleBtn) {
                 toggleBtn.addEventListener('click', function() {
                    const allTitles = document.querySelectorAll('.section-title');
                    const allContents = document.querySelectorAll('.section-content');
                    const shouldOpen = allTitles.length > 0 && !allTitles[0].classList.contains('active');
                    allTitles.forEach(title => title.classList.toggle('active', shouldOpen));
                    allContents.forEach(content => content.classList.toggle('active', shouldOpen));
                });
            }
        }

        function setupCollapsibleDefinitions() {
            abbreviationsListDiv.addEventListener('click', function(event) {
                if (event.target.classList.contains('toggle-def-btn')) {
                    const btn = event.target;
                    const definitionDiv = btn.nextElementSibling;
                    const isVisible = definitionDiv.classList.toggle('visible');
                    btn.textContent = isVisible ? '[Hide]' : '[Show]';
                }
            });
        }
        
        function setupCopyHighlightedButton() {
            const copyBtn = document.getElementById('copyHighlightedBtn');
            if (copyBtn) {
                copyBtn.addEventListener('click', function() {
                    const selectedText = window.getSelection().toString().trim();
                    if (selectedText) {
                        scratchPad.value = scratchPad.value ? `${scratchPad.value}\n\n${selectedText}` : selectedText;
                        scratchPad.scrollTop = scratchPad.scrollHeight;
                    }
                });
            }
        }

        function setupRewordButton() {
            const rewordBtn = document.getElementById('rewordBtn');
            if (rewordBtn) {
                rewordBtn.addEventListener('click', function() {
                    const textToReword = scratchPad.value.trim();
                    if (textToReword) {
                        const promptToCopy = `Please rephrase the following text for clarity and professional grammar: "${textToReword}"`;
                        navigator.clipboard.writeText(promptToCopy).then(() => {
                            const originalText = rewordBtn.innerHTML;
                            rewordBtn.textContent = 'Prompt Copied!';
                            setTimeout(() => {
                                rewordBtn.innerHTML = originalText;
                            }, 2000);
                        }).catch(err => {
                            console.error('Failed to copy text: ', err);
                        });
                    }
                });
            }
        }

        inputText.addEventListener('input', performTranslation);
        populateAbbreviationsList();
        setupToggleAllButton();
        setupCollapsibleDefinitions();
        setupCopyHighlightedButton();
        setupRewordButton(); 
        performTranslation();
    });
    </script>
</body>
</html>
